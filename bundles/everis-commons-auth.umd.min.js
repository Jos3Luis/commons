!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@angular/common/http"),require("everiscore"),require("@angular/core")):"function"==typeof define&&define.amd?define("everiscommons/auth",["exports","@angular/common/http","everiscore","@angular/core"],t):t((e.everis=e.everis||{},e.everis.commons=e.everis.commons||{},e.everis.commons.auth={}),e.ng.common.http,e["everiscore"],e.ng.core)}(this,function(e,r,n,o){"use strict";var u=function(e,t){return(u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)};var i=function(n){function e(e,t,r){var o=n.call(this)||this;return o._rules=e,o._authorizer=t,o._authServices=r,o.rules=o._rules,o.authorizer=o._authorizer,o.authServices=o._authServices,o.type=o.rules.auth,o.credentials=o.rules.credentials||{},o}return function o(e,t){function r(){this.constructor=e}u(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}(e,n),e}(n.CoreAuthorizerManager),s=new o.InjectionToken("authRules"),a=function(){function e(){}return e.prototype.getToken=function(e,t){throw new Error("Method not implemented.")},e.prototype.refreshToken=function(e,t){throw new Error("Method not implemented.")},e.decorators=[{type:o.Injectable}],e}(),c=function(){function e(e){this.rules=e,this.setIterceptor(),this.setTypeToken(),this.setHeaderName()}return e.prototype.prepare=function(){return this.rules},e.prototype.setIterceptor=function(){this.rules.interceptor=!this.rules.hasOwnProperty("interceptor")||this.rules.interceptor},e.prototype.setTypeToken=function(){this.rules.typeToken=this.rules.hasOwnProperty("typeToken")?this.rules.typeToken:"Bearer"},e.prototype.setHeaderName=function(){this.rules.headerName=this.rules.hasOwnProperty("headerName")?this.rules.headerName:"Authorization"},e}(),p=function(){function e(e){this.auth=e}return e.prototype.intercept=function(e,t){var r=this.auth.getAuthorizer()||null;if(r&&this.auth.rules.interceptor){var o=r.getToken(),n=JSON.parse('{"'+this.auth.rules.headerName+'":"'+this.auth.rules.typeToken+" "+o+'"}');""!==o&&(e=e.clone({setHeaders:n}))}return t.handle(e)},e.decorators=[{type:o.Injectable}],e.ctorParameters=function(){return[{type:i}]},e}();function h(e,t){var r=new c(e).prepare(),o=n.CoreAuthorizerFactory(e.auth);return new i(r,o,t)}var t=function(){function t(){}return t.forRoot=function(e){return{ngModule:t,providers:[{provide:a,useClass:e.model||a},{provide:r.HTTP_INTERCEPTORS,useClass:p,multi:!0},{provide:s,useValue:e},{provide:i,useFactory:h,deps:[s,a]}]}},t.decorators=[{type:o.NgModule,args:[{imports:[r.HttpClientModule]}]}],t}();e.factoryFnAuth=h,e.AuthServices=a,e.AuthRules=s,e.Authorization=i,e.EvAuth=t,e.Éµa=p,Object.defineProperty(e,"__esModule",{value:!0})});
//# sourceMappingURL=everis-commons-auth.umd.min.js.map